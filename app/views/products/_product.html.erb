<% name = current_user.present? ? current_user.email : ' '%>
<% if user_signed_in? %>
<h3>Welcome to the shop <%= name %></h3>
<% end %>
<aside>
  <div class="container">
    <div class="row justify-content-center">
       <% if product.image.present? %>
      <p><%= image_tag product.image.variant(resize_to_limit: [285, 285]).processed  %></p>
    <% end %>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center">
      <p class="h3">
        <% if show_link %>
          <%= link_to product.name, product %>
        <% else %>
          <%= product.name %>
        <% end %>
      </p>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center">
      <p class="h5">Price: <%= product.price %></p>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center">
     <% if single_page %>
        <p class="h6"><%= product.description %></p>
        <p class="h6">----Quantity in stock:<%= product.quantity %></p>
      <% else %>
        <p>Click on the product name to view description and quantity in stock</p>
      <% end %>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center">
       <% if cart.include?(product) %>
      <%= button_to cart_path(product), method: :delete do %>
        Remove From Cart
      <% end %>
    <% else %>
      <%= form_with  url: cart_index_path, method: :post do %>
      <%# this line below says id equals id of the product, hidden rails magic to add to cart %>
        <%= hidden_field_tag(:id, product.id) %>
        <%= button_tag 'Add to Cart' %>
      <% end %>
    <% end %>
    </div>
  </div>
</aside>

